services:
  - name: api-gateway
    path: services/api-gateway
    kind: http
    routes_base: /api
    port: 9000
    contracts: [healthz, readyz, metrics, openapi]

  - name: web
    path: services/web
    kind: web
    port: 9011
    contracts: [healthz]

  - name: mobile-api
    path: services/mobile-api
    kind: http
    port: 9009
    contracts: [healthz, readyz, metrics, openapi]

  - name: auth-service
    path: services/auth-service
    kind: http
    db: openpolicy_auth
    port: 9001
    contracts: [healthz, readyz, metrics, openapi]

  - name: policy-service
    path: services/policy-service
    kind: http
    db: openpolicy_app
    domains: [policies, committees, debates, votes]
    port: 9002
    contracts: [healthz, readyz, metrics, openapi]

  - name: search-service
    path: services/search-service
    kind: http
    port: 9003
    contracts: [healthz, readyz, metrics, openapi]

  - name: notification-service
    path: services/notification-service
    kind: http
    port: 9004
    contracts: [healthz, readyz, metrics, openapi]

  - name: config-service
    path: services/config-service
    kind: http
    port: 9005
    contracts: [healthz, readyz, metrics, openapi]

  - name: monitoring-service
    path: services/monitoring-service
    kind: http
    port: 9006
    contracts: [healthz, readyz, metrics]

  - name: scraper-service
    path: services/scraper-service
    kind: worker+http
    db: openpolicy_scrapers
    port: 9008
    contracts: [healthz, readyz, metrics, openapi]

  - name: etl
    path: services/etl
    kind: worker+http
    db: [openpolicy_scrapers, openpolicy_app]
    port: 9007
    contracts: [healthz, readyz, metrics, alembic]

  - name: legacy-django
    path: services/legacy-django
    kind: http
    port: 9010
    contracts: [healthz, readyz, metrics]